{% extends "base.html" %}

{% block title %}WFP and WCP{% endblock %}

{% block styles %}
<style>
    main {
        padding: 100px 20px;
    }

    main .cont {
        margin-left: auto;
        margin-right: auto;
        max-width: 600px;
    }

    h1 {
        font-family: 'Roboto Slab', serif !important;
        font-weight: 900;
    }
</style>
{% endblock %}

{% block content %}
<main>
    <div class="cont">
        <div class="list-head">
            <h1><i class="fa fa-user-plus"></i> Add Wildlife Farm/Collector's Permit</h1>
        </div>
        <form action="" method="POST" enctype="multipart/form-data">
            <div class="text-box">
                <span>Wildlife Farm Permit No:</span>
                <input type="text" name="wfp_no" required>
            </div>
            <div class="text-box">
                <span>Wildlife Collector's Permit No:</span>
                <input type="text" name="wcp_no" required>
            </div>
            <div class="text-box">
                <span>Issuance Date:</span>
                <input type="date" name="issuance_date" required>
            </div>
            <div class="text-box">
                <span>Expiry Date:</span>
                <input type="date" name="expiry_date" required>
            </div>
            <div class="text-box">
                <span>Permitee Name:</span>
                <input type="text" name="permitee_name" required>
            </div>
            <div class="text-box">
                <span>Permitee Address:</span>
                <input type="text" name="permitee_address" required>
            </div>
            <div class="text-box">
                <span>Farm Name:</span>
                <input type="text" name="farm_name" required>
            </div>
            <div class="text-box">
                <span>Farm Address:</span>
                <input type="text" name="farm_address" required>
            </div>
            <div class="file-input">
                <span>Wildlife Farm Permit Photo:</span>
                <input type="file" name="wfp_photo" required>
            </div>
            <div class="file-input">
                <span>Wildlife Collector's Permit Photo:</span>
                <input type="file" name="wcp_photo" required>
            </div>
            <div class="file-input">
                <span>Permitee Photo:</span>
                <input type="file" name="permitee_photo">
            </div>
            <div class="file-input">
                <span>Farm Photo:</span>
                <input type="file" name="farm_photo">
            </div>
            <div class="buttons">
                <a href="/admin/wfpwcp/list.php"
                    class="w3-btn w3-text-blue w3-round-large w3-border w3-border-blue">Back</a>
                <input type="submit" class="w3-btn w3-blue w3-round-large" name="submit" value="Save">
            </div>
        </form>
    </div>
</main>
{% endblock %}

{% block scripts %}
<script>
    function buildUsername() {
        const uType = $('#type').val();
        const fn = $('#fn').val().replace(' ', '').toLowerCase();
        const ln = $('#ln').val().replace(' ', '').toLowerCase();
        let username = uType === 'CLIENT' ? 'ltpmdq_' : '';
        username += fn.substring(0, 3) + ln;
        $('.username').val(username.toLowerCase());
        console.log('Hahaha');
    }

    $(function () {
        $('#fn').keydown(buildUsername);
        $('#ln').keydown(buildUsername);
        $('#fn').keyup(buildUsername);
        $('#ln').keyup(buildUsername);
        $('#type').change(buildUsername);
        buildUsername();
    })
</script>
{% endblock %}